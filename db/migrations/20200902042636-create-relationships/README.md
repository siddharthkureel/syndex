# Migration `20200902042636-create-relationships`

This migration has been generated by Mark Catley at 9/2/2020, 4:26:36 PM.
You can check out the [state of the schema](./schema.prisma) after the migration.

## Database Steps

```sql
CREATE TABLE "public"."Relationship" (
"id" SERIAL,
"createdAt" timestamp(3)   NOT NULL DEFAULT CURRENT_TIMESTAMP,
"updatedAt" timestamp(3)   NOT NULL ,
"primaryAccountId" integer   NOT NULL ,
"secondaryAccountId" integer   NOT NULL ,
PRIMARY KEY ("id")
)

ALTER TABLE "public"."Relationship" ADD FOREIGN KEY ("primaryAccountId")REFERENCES "public"."Account"("id") ON DELETE CASCADE ON UPDATE CASCADE

ALTER TABLE "public"."Relationship" ADD FOREIGN KEY ("secondaryAccountId")REFERENCES "public"."Account"("id") ON DELETE CASCADE ON UPDATE CASCADE
```

## Changes

```diff
diff --git schema.prisma schema.prisma
migration 20200902041201-create-issues..20200902042636-create-relationships
--- datamodel.dml
+++ datamodel.dml
@@ -2,9 +2,9 @@
 // learn more about it in the docs: https://pris.ly/d/prisma-schema
 datasource db {
   provider = ["sqlite", "postgres"]
-  url = "***"
+  url = "***"
 }
 generator client {
   provider = "prisma-client-js"
@@ -39,14 +39,16 @@
   privateData        String?
 }
 model Account {
-  id        Int      @default(autoincrement()) @id
-  createdAt DateTime @default(now())
-  updatedAt DateTime @updatedAt
-  name      String   
-  verified  Boolean  @default(false)
-  user      User?    
+  id        Int            @default(autoincrement()) @id
+  createdAt DateTime       @default(now())
+  updatedAt DateTime       @updatedAt
+  name      String         
+  verified  Boolean        @default(false)
+  user      User?          
+  officers  Relationship[] @relation(name: "PrimaryAccountOnRelationship")
+  roles     Relationship[] @relation(name: "SecondaryAccountOnRelationship")
 }
 model Issue {
   id              Int      @default(autoincrement()) @id
@@ -55,4 +57,14 @@
   name            String   
   minimumQuantity Float    
   price           Float    
 }
+
+model Relationship {
+  id                 Int      @default(autoincrement()) @id
+  createdAt          DateTime @default(now())
+  updatedAt          DateTime @updatedAt
+  primaryAccount     Account  @relation(name: "PrimaryAccountOnRelationship", fields: [primaryAccountId], references: [id])
+  primaryAccountId   Int      
+  secondaryAccount   Account  @relation(name: "SecondaryAccountOnRelationship", fields: [secondaryAccountId], references: [id])
+  secondaryAccountId Int      
+}
```


